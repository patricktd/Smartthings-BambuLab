name: bambulab.printer.v1
components:
  - id: main
    capabilities:
      - id: switch
        version: 1
      - id: refresh
        version: 1
      - id: healthCheck
        version: 1
      - id: temperatureMeasurement
        version: 1

preferences:
  - name: "printerIp"
    title: "IP da Impressora"
    description: "Endereço IP local da impressora"
    required: true
    preferenceType: string
    definition:
      stringType: "ip"
      default: ""

  - name: "printerPort"
    title: "Porta MQTT"
    description: "Padrão: 8883 (TLS)"
    required: true
    preferenceType: integer
    definition:
      minimum: 1
      maximum: 65535
      default: 8883

  - name: "mqttUsername"
    title: "Usuário MQTT"
    description: "Padrão: bblp"
    required: true
    preferenceType: string
    definition:
      stringType: "text"  # ← CORREÇÃO ADICIONADA
      default: "bblp"
      readOnly: true

  - name: "mqttPassword"
    title: "Código de Acesso"
    description: "Código físico da impressora"
    required: true
    preferenceType: string
    definition:
      stringType: "password"
      default: ""

  - name: "caCertificate"
    title: "Certificado CA"
    description: "Certificado TLS (opcional)"
    required: false  # ← Alterado para opcional
    preferenceType: string
    definition:
      stringType: "textarea"  # ← CORREÇÃO ADICIONADA
      default: ""