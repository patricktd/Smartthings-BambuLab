# profiles/bambulab-printer.yml
name: bambulab.printer.profile.v2 # Nome atualizado
components:
  - id: main
    capabilities:
      - id: switch # Para ligar/desligar ou iniciar/parar impressão (conceptual)
        version: 1
      - id: temperatureMeasurement # Para temperatura do bico ou mesa
        version: 1
      - id: refresh # Para solicitar atualização de estado
        version: 1
      - id: healthCheck # Para indicar o estado da conexão (online/offline)
        version: 1
      # Adicione outras capabilities relevantes, como:
      # - threeAxis (para progresso X,Y,Z)
      # - execution (para estado da impressão: imprimindo, pausa, completo)
      # - Se criar capabilities personalizadas, liste-as aqui e defina-as na pasta /capabilities
    categories:
      - name: Switch # Categoria válida. "Other" também é uma opção.
preferences:
  - name: "ipAddress"
    title: "Endereço IP da Impressora"
    description: "Digite o endereço IP local da sua impressora Bambu Lab."
    required: true
    definition:
      type: "string"
      default: ""
  - name: "port"
    title: "Porta MQTT"
    description: "Porta para conexão MQTT (padrão 8883 para Bambu Lab)."
    required: true
    definition:
      type: "integer"
      default: 8883
      minimum: 1
      maximum: 65535
  - name: "username"
    title: "Utilizador MQTT"
    description: "Nome de utilizador para a conexão MQTT."
    required: true
    definition:
      type: "string"
      default: "bblp"
  - name: "accessToken"
    title: "Senha / Access Code MQTT"
    description: "A senha ou 'Access Code' fornecido pela impressora para MQTT."
    required: true
    definition:
      type: "string"
      stringType: "password"
      default: ""
  - name: "caCertificate"
    title: "Certificado CA (Formato PEM)"
    description: "Cole o conteúdo completo do certificado CA. Deve começar com '-----BEGIN CERTIFICATE-----'."
    required: true
    definition:
      type: "string"
      stringType: "paragraph"
      default: ""
  - name: "mqttSerial"
    title: "Número de Série da Impressora (para Tópicos)"
    description: "O número de série da impressora, usado para construir os tópicos MQTT (ex: N4P00P000000000)."
    required: true
    definition:
      type: "string"
      default: ""
  - name: "mqttClientId"
    title: "MQTT Client ID (Opcional)"
    description: "ID de cliente MQTT a ser usado. Deixe em branco para usar o ID do dispositivo SmartThings."
    required: false
    definition:
      type: "string"
      default: ""
